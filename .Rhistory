guarantee_df[k1:k2,][k3+1,]
guarantee_df[k1:k2,][k3,]
k1
k2
guarantee_df
k3 <- which.min(guarantee_df$European.Equity[k1:(k1+k2),])
k3 <- which.min(guarantee_df$European.Equity[k1:(k1+k2)])
k3
guarantee_df[k1:(k1+k2),][k3,]
guarantee_df[k1:(k1+k2),][k3-1,]
guarantee_df[k1:(k1+k2),][k3+1,]
guarantee_df[k1:(k1+k2),][k3+2,]
guarantee_df[k1:(k1+k2),][k3+3,]
guarantee_df[k1:(k1+k2),][k3,]
guarantee_df[k1:(k1+k2),][k3,]
library(gridExtra)
grid = expand.grid(c, L_target, L_trigger)
m <- c(1, 2)
L_target <- c(125, 130)/100
L_trigger <- c(130, 150)/100
grid = expand.grid(c, L_target, L_trigger)
grid = expand.grid(m, L_target, L_trigger)
grid
grid = expand.grid(m = m, "L_target" = L_target, "L_trigger" = L_trigger)
grid
m <- c(1, 2)
L_target <- c(125, 130)/100
L_trigger <- c(130,)/100
m = 1
L_trigger = 130
L_target = 125
# m <- c(1, 2)
# L_target <- c(125, 130)/100
# L_trigger <- c(130,135)/100
m = 1
L_trigger = 130
L_target = 125
grid = expand.grid(m = m, "L_target" = L_target, "L_trigger" = L_trigger)
returns_choice <- readRDS("returns_choice.rds")
mkt_EU_period <- MKT_EU_EU %>% filter(date >= 200709 & date <= 202412)
colnames(mkt_EU_period) <- c("date", "return")
guarantees_choice <- CPPI(m, L_target, L_trigger, returns_choice)
guarantees_EU_equity <- CPPI(m, L_target, L_trigger, return_rp)
return_rp
guarantees_EU_equity <- CPPI(m, L_target, L_trigger, tibble(date = returns_choice$date, return = return_rp))
# m <- c(1, 2)
# L_target <- c(125, 130)/100
# L_trigger <- c(130,135)/100
m = 1
L_trigger = 130
L_target = 125
grid = expand.grid(m = m, "L_target" = L_target, "L_trigger" = L_trigger)
returns_choice <- readRDS("returns_choice.rds")
mkt_EU_period <- MKT_EU_EU %>% filter(date >= 200709 & date <= 202412)
colnames(mkt_EU_period) <- c("date", "return")
guarantees_choice <- CPPI(m, L_target, L_trigger, returns_choice)
guarantees_EU_equity <- CPPI(m, L_target, L_trigger, tibble(date = returns_choice$date, return = return_rp))
guarantee_df <- data.frame(date = All_years$TIME_PERIOD[36:124],
"Portfolio 1" = guarantees_choice,
"European Equity" = guarantees_EU_equity)
guarantee_df %>%
pivot_longer(cols = -date, names_to = "Portfolio", values_to = "Guarantee") %>%
ggplot(aes(x = as.Date(date), y = Guarantee, color = Portfolio)) +
geom_line(size = 1.1) +
geom_point(size = 2, alpha = 0.7) +
# geom_line(color = "#0072B2", size = 1.1) +
# geom_point(color = "#0072B2", size = 2, alpha = 0.7) +
scale_color_manual(values = c("Portfolio.1" = "#0072B2", "European.Equity" = "#D55E00"),
breaks=c("Portfolio.1", "European.Equity"),
labels=c("Portfolio 1", "European Equity")) +
scale_x_date(date_labels = "%Y", date_breaks = "2 years") +
scale_y_continuous(labels = scales::number_format(accuracy = 0.01)) +
labs(
title = "Development of the Portfolio Guarantee Over Time",
subtitle = "Guarantee level implied by CPPI floor mechanism",
x = "Date",
y = "Guarantee Value"
) +
theme_minimal(base_size = 13) +
theme(
plot.title = element_text(face = "bold", size = 15, hjust = 0.5),
plot.subtitle = element_text(size = 11, hjust = 0.5, color = "gray40"),
axis.title = element_text(face = "bold"),
panel.grid.minor = element_blank(),
panel.grid.major.x = element_blank()
)
# Første spike
k1 <- which.max(guarantee_df$European.Equity)
guarantee_df[k1,]
# anden spike
k2 <- which.max(guarantee_df$European.Equity[(k1+5):nrow(guarantee_df)])
guarantee_df[k1+4+k2,]
# minimum mellem spikes
k3 <- which.min(guarantee_df$European.Equity[k1:(k1+k2)])
guarantee_df[k1:(k1+k2),][k3,]
df <- return_internal[,1]
df <- tibble(date = factors_return_calc$date, return = return_internal[,1])
df
saveRDS(df, "returns_choice.rds")
k <- 1
cumulative_return_rp <- (cumprod(1+return_rp/100)-1)*100
cumulative_return_mv_chosen <- cumulative_return_internal[,k]
round(cumulative_return_rp[n], 0)-round(cumulative_return_mv_chosen[n], 0)
round(cumulative_return_rp[n]/n, 2) - round(cumulative_return_mv_chosen[n]/n, 2)
round(sd(return_rp), 2)-round(sd(return_internal[,k]), 2)
rp_df <- tibble(
Date = ym(factors_return_calc$date),
"Risk parity" = cumulative_return_rp,
"Portfolio 1" = cumulative_return_mv_chosen
)
rp_df %>%
pivot_longer(cols = -Date, names_to = "Portfolio", values_to = "Cumulative_Return") %>%
ggplot(aes(x = Date, y = Cumulative_Return, color = Portfolio)) +
geom_line(linewidth = 1) +
labs(
title = "Cumulative Returns of Risk parity portfolio and Portfolio 1",
x = "Date",
y = "Cumulative Return"
) +
theme_minimal() +
theme(
plot.title = element_text(face = "bold", size = 16),
plot.subtitle = element_text(size = 12),
legend.position = "right",
legend.title = element_text(face = "bold")
)
df <- tibble(date = factors_return_calc$date, return = return_internal[,1])
saveRDS(df, "returns_choice.rds")
returns_choice <- readRDS("returns_choice.rds")
# m <- c(1, 2)
# L_target <- c(125, 130)/100
# L_trigger <- c(130,135)/100
m = 1
L_trigger = 130
L_target = 125
grid = expand.grid(m = m, "L_target" = L_target, "L_trigger" = L_trigger)
returns_choice <- readRDS("returns_choice.rds")
mkt_EU_period <- MKT_EU_EU %>% filter(date >= 200709 & date <= 202412)
colnames(mkt_EU_period) <- c("date", "return")
guarantees_choice <- CPPI(m, L_target, L_trigger, returns_choice)
guarantees_EU_equity <- CPPI(m, L_target, L_trigger, tibble(date = returns_choice$date, return = return_rp))
guarantee_df <- data.frame(date = All_years$TIME_PERIOD[36:124],
"Portfolio 1" = guarantees_choice,
"European Equity" = guarantees_EU_equity)
guarantee_df %>%
pivot_longer(cols = -date, names_to = "Portfolio", values_to = "Guarantee") %>%
ggplot(aes(x = as.Date(date), y = Guarantee, color = Portfolio)) +
geom_line(size = 1.1) +
geom_point(size = 2, alpha = 0.7) +
# geom_line(color = "#0072B2", size = 1.1) +
# geom_point(color = "#0072B2", size = 2, alpha = 0.7) +
scale_color_manual(values = c("Portfolio.1" = "#0072B2", "European.Equity" = "#D55E00"),
breaks=c("Portfolio.1", "European.Equity"),
labels=c("Portfolio 1", "European Equity")) +
scale_x_date(date_labels = "%Y", date_breaks = "2 years") +
scale_y_continuous(labels = scales::number_format(accuracy = 0.01)) +
labs(
title = "Development of the Portfolio Guarantee Over Time",
subtitle = "Guarantee level implied by CPPI floor mechanism",
x = "Date",
y = "Guarantee Value"
) +
theme_minimal(base_size = 13) +
theme(
plot.title = element_text(face = "bold", size = 15, hjust = 0.5),
plot.subtitle = element_text(size = 11, hjust = 0.5, color = "gray40"),
axis.title = element_text(face = "bold"),
panel.grid.minor = element_blank(),
panel.grid.major.x = element_blank()
)
# Første spike
k1 <- which.max(guarantee_df$European.Equity)
guarantee_df[k1,]
# anden spike
k2 <- which.max(guarantee_df$European.Equity[(k1+5):nrow(guarantee_df)])
guarantee_df[k1+4+k2,]
# minimum mellem spikes
k3 <- which.min(guarantee_df$European.Equity[k1:(k1+k2)])
guarantee_df[k1:(k1+k2),][k3,]
guarantees_EU_equity <- CPPI(m, L_target, L_trigger, mkt_EU_period)
search_grid = expand.grid(m = m, "L_target" = L_target, "L_trigger" = L_trigger)
for(variables in search_grid){
}
for(a, b, c in search_grid){
guarantees <- array(NA, c(nrow(guarantee_df), ncol = nrow(search_grid)))
for(i in 1:nrow(search_grid)){
guarantees[i] <- CPPI(search_grid[i,1], search_grid[i,2], search_grid[i,3], returns_choice)
}
guarantees
guarantees <- array(NA, c(nrow(guarantee_df), = nrow(search_grid)))
guarantees <- array(NA, c(nrow(guarantee_df), = nrow(search_grid))
guarantees <- array(NA, c(nrow(guarantee_df), = nrow(search_grid)))
guarantees <- array(NA, c(nrow(guarantee_df), nrow(search_grid)))
guarantees
search_grid
m <- c(1, 2)
L_target <- c(125, 130)/100
search_grid = expand.grid(m = m, "L_trigger" = L_trigger, "L_target" = L_target)
returns_choice <- readRDS("returns_choice.rds")
guarantees <- array(NA, c(nrow(guarantee_df), nrow(search_grid)))
for(i in 1:nrow(search_grid)){
guarantees[i] <- CPPI(search_grid[i,1], search_grid[i,2], search_grid[i,3], returns_choice)
}
guarantees <- array(NA, c(nrow(guarantee_df), nrow(search_grid)))
for(i in 1:nrow(search_grid)){
guarantees[,i] <- CPPI(search_grid[i,1], search_grid[i,2], search_grid[i,3], returns_choice)
}
guarantees
nrow(search_grid)
search_grid
m <- c(1, 2)
L_target <- c(125, 130)/100
L_trigger <- c(130,135)/100
search_grid = expand.grid(m = m, "L_trigger" = L_trigger, "L_target" = L_target)
search_grid
returns_choice <- readRDS("returns_choice.rds")
guarantees <- array(NA, c(nrow(guarantee_df), nrow(search_grid)))
for(i in 1:nrow(search_grid)){
guarantees[,i] <- CPPI(search_grid[i,1], search_grid[i,2], search_grid[i,3], returns_choice)
}
guarantees
plot_df <- tibble(guarantees)
plot_df
plot_df
nrow(plot_df)
ncol(plot_df)
plot_df <- as.tibble(guarantees)
plot_df
plot_df <- cbind(All_years$TIME_PERIOD[36:124], plot_df)
plot_df
plot_df <- cbind(tibble(date = All_years$TIME_PERIOD[36:124]), plot_df)
plot_df <- as.tibble(guarantees)
plot_df <- cbind(tibble(date = All_years$TIME_PERIOD[36:124]), plot_df)
plot_df
returns_choice <- readRDS("returns_choice.rds")
m <- c(1, 2)
L_target <- c(125, 130)/100
L_trigger <- c(130,135)/100
search_grid = expand.grid(m = m, "L_trigger" = L_trigger, "L_target" = L_target)
guarantees <- array(NA, c(nrow(All_years$TIME_PERIOD[36:124]), nrow(search_grid)))
for(i in 1:nrow(search_grid)){
guarantees[,i] <- CPPI(search_grid[i,1], search_grid[i,2], search_grid[i,3], returns_choice)
}
guarantees <- array(NA, c(nrow(All_years$TIME_PERIOD[36:124]), nrow(search_grid)))
guarantees
nrow(All_years$TIME_PERIOD[36:124])
All_years
guarantees <- array(NA, c(nrow(All_years[36:124,]), nrow(search_grid)))
returns_choice <- readRDS("returns_choice.rds")
m <- c(1, 2)
L_target <- c(125, 130)/100
L_trigger <- c(130,135)/100
search_grid = expand.grid(m = m, "L_trigger" = L_trigger, "L_target" = L_target)
guarantees <- array(NA, c(nrow(All_years[36:124,]), nrow(search_grid)))
for(i in 1:nrow(search_grid)){
guarantees[,i] <- CPPI(search_grid[i,1], search_grid[i,2], search_grid[i,3], returns_choice)
}
plot_df <- as.tibble(guarantees)
plot_df <- cbind(tibble(date = All_years$TIME_PERIOD[36:124]), plot_df)
plot_df %>%
pivot_longer(cols = -date, names_to = "CPPI_strat", values_to = "Guarantee") %>%
ggplot(aes(x = as.Date(date), y = Guarantee, color = CPPI_strat)) +
geom_line(size = 1.1) +
geom_point(size = 2, alpha = 0.7) +
# geom_line(color = "#0072B2", size = 1.1) +
# geom_point(color = "#0072B2", size = 2, alpha = 0.7) +
scale_color_manual(values = c("Portfolio.1" = "#0072B2", "European.Equity" = "#D55E00"),
breaks=c("Portfolio.1", "European.Equity"),
labels=c("Portfolio 1", "European Equity")) +
scale_x_date(date_labels = "%Y", date_breaks = "2 years") +
scale_y_continuous(labels = scales::number_format(accuracy = 0.01)) +
labs(
title = "Development of the Portfolio Guarantee Over Time",
subtitle = "Guarantee level implied by CPPI floor mechanism",
x = "Date",
y = "Guarantee Value"
) +
theme_minimal(base_size = 13) +
theme(
plot.title = element_text(face = "bold", size = 15, hjust = 0.5),
plot.subtitle = element_text(size = 11, hjust = 0.5, color = "gray40"),
axis.title = element_text(face = "bold"),
panel.grid.minor = element_blank(),
panel.grid.major.x = element_blank()
)
# Første spike
k1 <- which.max(guarantee_df$European.Equity)
guarantee_df[k1,]
# anden spike
k2 <- which.max(guarantee_df$European.Equity[(k1+5):nrow(guarantee_df)])
guarantee_df[k1+4+k2,]
# minimum mellem spikes
k3 <- which.min(guarantee_df$European.Equity[k1:(k1+k2)])
guarantee_df[k1:(k1+k2),][k3,]
plot_df %>%
pivot_longer(cols = -date, names_to = "CPPI_strat", values_to = "Guarantee") %>%
ggplot(aes(x = as.Date(date), y = Guarantee, color = CPPI_strat)) +
geom_line(size = 1.1) +
geom_point(size = 2, alpha = 0.7) +
# geom_line(color = "#0072B2", size = 1.1) +
# geom_point(color = "#0072B2", size = 2, alpha = 0.7) +
# scale_color_manual(values = c("Portfolio.1" = "#0072B2", "European.Equity" = "#D55E00"),
#                    breaks=c("Portfolio.1", "European.Equity"),
#                    labels=c("Portfolio 1", "European Equity")) +
scale_x_date(date_labels = "%Y", date_breaks = "2 years") +
scale_y_continuous(labels = scales::number_format(accuracy = 0.01)) +
labs(
title = "Development of the Portfolio Guarantee Over Time",
subtitle = "Guarantee level implied by CPPI floor mechanism",
x = "Date",
y = "Guarantee Value"
) +
theme_minimal(base_size = 13) +
theme(
plot.title = element_text(face = "bold", size = 15, hjust = 0.5),
plot.subtitle = element_text(size = 11, hjust = 0.5, color = "gray40"),
axis.title = element_text(face = "bold"),
panel.grid.minor = element_blank(),
panel.grid.major.x = element_blank()
)
search_grid
plot_df %>%
pivot_longer(cols = -date, names_to = "CPPI_strat", values_to = "Guarantee") %>%
ggplot(aes(x = as.Date(date), y = Guarantee, color = CPPI_strat)) +
geom_line(size = 1.1) +
geom_point(size = 2, alpha = 0.7) +
# geom_line(color = "#0072B2", size = 1.1) +
# geom_point(color = "#0072B2", size = 2, alpha = 0.7) +
# scale_color_manual(values = c("Portfolio.1" = "#0072B2", "European.Equity" = "#D55E00"),
#                    breaks=c("Portfolio.1", "European.Equity"),
#                    labels=c("Portfolio 1", "European Equity")) +
scale_x_date(date_labels = "%Y", date_breaks = "2 years") +
scale_y_continuous(labels = scales::number_format(accuracy = 0.01)) +
labs(
title = "Development of the Portfolio Guarantee Over Time",
subtitle = "Guarantee level implied by CPPI floor mechanism",
x = "Date",
y = "Guarantee Value"
) +
theme_minimal(base_size = 13) +
theme(
plot.title = element_text(face = "bold", size = 15, hjust = 0.5),
plot.subtitle = element_text(size = 11, hjust = 0.5, color = "gray40"),
axis.title = element_text(face = "bold"),
panel.grid.minor = element_blank(),
panel.grid.major.x = element_blank()
)
search_grid <- order(search_grid, by = m)
search_grid <- sort_by(search_grid, by = m)
search_grid <- sort_by(search_grid, m)
search_grid
search_grid <- sort_by(search_grid, c(m, L_trigger, L_target))
search_grid
search_grid = expand.grid(m = m, "L_trigger" = L_trigger, "L_target" = L_target)
search_grid <- sort_by(search_grid, c(m, L_trigger, L_target))
search_grid
m <- c(1, 2)
L_target <- c(125, 130)/100
L_trigger <- c(130,135)/100
search_grid = expand.grid(m = m, "L_trigger" = L_trigger, "L_target" = L_target)
search_grid
search_grid <- sort_by(search_grid, c(m, L_trigger, L_target))
search_grid
m <- c(1, 2)
L_trigger <- c(130,135)/100
search_grid = expand.grid(m = m, "L_trigger" = L_trigger, "L_target" = L_target)
search_grid <- sort_by(search_grid, ~list(m, L_trigger, L_target))
search_grid
returns_choice <- readRDS("returns_choice.rds")
m <- c(1, 2)
L_target <- c(125, 130)/100
L_trigger <- c(130,135)/100
search_grid = expand.grid(m = m, "L_trigger" = L_trigger, "L_target" = L_target)
search_grid <- sort_by(search_grid, ~list(m, L_trigger, L_target))
guarantees <- array(NA, c(nrow(All_years[36:124,]), nrow(search_grid)))
for(i in 1:nrow(search_grid)){
guarantees[,i] <- CPPI(search_grid[i,1], search_grid[i,2], search_grid[i,3], returns_choice)
}
plot_df <- as.tibble(guarantees)
plot_df <- cbind(tibble(date = All_years$TIME_PERIOD[36:124]), plot_df)
plot_df %>%
pivot_longer(cols = -date, names_to = "CPPI_strat", values_to = "Guarantee") %>%
ggplot(aes(x = as.Date(date), y = Guarantee, color = CPPI_strat)) +
geom_line(size = 1.1) +
geom_point(size = 2, alpha = 0.7) +
# geom_line(color = "#0072B2", size = 1.1) +
# geom_point(color = "#0072B2", size = 2, alpha = 0.7) +
# scale_color_manual(values = c("Portfolio.1" = "#0072B2", "European.Equity" = "#D55E00"),
#                    breaks=c("Portfolio.1", "European.Equity"),
#                    labels=c("Portfolio 1", "European Equity")) +
scale_x_date(date_labels = "%Y", date_breaks = "2 years") +
scale_y_continuous(labels = scales::number_format(accuracy = 0.01)) +
labs(
title = "Development of the Portfolio Guarantee Over Time",
subtitle = "Guarantee level implied by CPPI floor mechanism",
x = "Date",
y = "Guarantee Value"
) +
theme_minimal(base_size = 13) +
theme(
plot.title = element_text(face = "bold", size = 15, hjust = 0.5),
plot.subtitle = element_text(size = 11, hjust = 0.5, color = "gray40"),
axis.title = element_text(face = "bold"),
panel.grid.minor = element_blank(),
panel.grid.major.x = element_blank()
)
returns_choice <- readRDS("returns_choice.rds")
m <- c(1, 2)
L_target <- c(125, 130)/100
L_trigger <- c(130,135)/100
search_grid = expand.grid(m = m, "L_trigger" = L_trigger, "L_target" = L_target)
search_grid <- sort_by(search_grid, ~list(m, L_trigger, L_target))
guarantees <- array(NA, c(nrow(All_years[36:124,]), nrow(search_grid)))
for(i in 1:nrow(search_grid)){
guarantees[,i] <- CPPI(search_grid[i,1], search_grid[i,2], search_grid[i,3], returns_choice)
}
plot_df <- as.tibble(guarantees)
plot_df <- cbind(tibble(date = All_years$TIME_PERIOD[36:124]), plot_df)
plot_df %>%
pivot_longer(cols = -date, names_to = "CPPI_strat", values_to = "Guarantee") %>%
ggplot(aes(x = as.Date(date), y = Guarantee, color = CPPI_strat)) +
geom_line(size = 1.1) +
geom_point(size = 2, alpha = 0.7) +
# geom_line(color = "#0072B2", size = 1.1) +
# geom_point(color = "#0072B2", size = 2, alpha = 0.7) +
# scale_color_manual(values = c("Portfolio.1" = "#0072B2", "European.Equity" = "#D55E00"),
#                    breaks=c("Portfolio.1", "European.Equity"),
#                    labels=c("Portfolio 1", "European Equity")) +
scale_x_date(date_labels = "%Y", date_breaks = "2 years") +
scale_y_continuous(labels = scales::number_format(accuracy = 0.01)) +
labs(
title = "Development of the Portfolio Guarantee Over Time",
subtitle = "Guarantee level implied by CPPI floor mechanism",
x = "Date",
y = "Guarantee Value"
) +
scale_color_viridis_d(option = "cividis") +
theme_minimal(base_size = 13) +
theme(
plot.title = element_text(face = "bold", size = 15, hjust = 0.5),
plot.subtitle = element_text(size = 11, hjust = 0.5, color = "gray40"),
axis.title = element_text(face = "bold"),
panel.grid.minor = element_blank(),
panel.grid.major.x = element_blank()
)
returns_choice <- readRDS("returns_choice.rds")
m <- c(1, 2, 3)
L_target <- c(125, 130)/100
L_trigger <- c(130, 135)/100
search_grid = expand.grid(m = m, "L_trigger" = L_trigger, "L_target" = L_target)
search_grid <- sort_by(search_grid, ~list(m, L_trigger, L_target))
guarantees <- array(NA, c(nrow(All_years[36:124,]), nrow(search_grid)))
for(i in 1:nrow(search_grid)){
guarantees[,i] <- CPPI(search_grid[i,1], search_grid[i,2], search_grid[i,3], returns_choice)
}
plot_df <- as.tibble(guarantees)
plot_df <- cbind(tibble(date = All_years$TIME_PERIOD[36:124]), plot_df)
plot_df %>%
pivot_longer(cols = -date, names_to = "CPPI_strat", values_to = "Guarantee") %>%
ggplot(aes(x = as.Date(date), y = Guarantee, color = CPPI_strat)) +
geom_line(size = 1.1) +
geom_point(size = 2, alpha = 0.7) +
# geom_line(color = "#0072B2", size = 1.1) +
# geom_point(color = "#0072B2", size = 2, alpha = 0.7) +
# scale_color_manual(values = c("Portfolio.1" = "#0072B2", "European.Equity" = "#D55E00"),
#                    breaks=c("Portfolio.1", "European.Equity"),
#                    labels=c("Portfolio 1", "European Equity")) +
scale_x_date(date_labels = "%Y", date_breaks = "2 years") +
scale_y_continuous(labels = scales::number_format(accuracy = 0.01)) +
labs(
title = "Development of the Portfolio Guarantee Over Time",
subtitle = "Guarantee level implied by CPPI floor mechanism",
x = "Date",
y = "Guarantee Value"
) +
scale_color_viridis_d(option = "cividis") +
theme_minimal(base_size = 13) +
theme(
plot.title = element_text(face = "bold", size = 15, hjust = 0.5),
plot.subtitle = element_text(size = 11, hjust = 0.5, color = "gray40"),
axis.title = element_text(face = "bold"),
panel.grid.minor = element_blank(),
panel.grid.major.x = element_blank()
)
search_grid
plot_df %>%
pivot_longer(cols = -date, names_to = "CPPI_strat", values_to = "Guarantee") %>%
ggplot(aes(x = as.Date(date), y = Guarantee, color = CPPI_strat)) +
geom_line(size = 1.1) +
geom_point(size = 2, alpha = 0.7) +
# geom_line(color = "#0072B2", size = 1.1) +
# geom_point(color = "#0072B2", size = 2, alpha = 0.7) +
# scale_color_manual(values = c("Portfolio.1" = "#0072B2", "European.Equity" = "#D55E00"),
#                    breaks=c("Portfolio.1", "European.Equity"),
#                    labels=c("Portfolio 1", "European Equity")) +
scale_x_date(date_labels = "%Y", date_breaks = "2 years") +
scale_y_continuous(labels = scales::number_format(accuracy = 0.01)) +
labs(
title = "Development of the Portfolio Guarantee Over Time",
subtitle = "Guarantee level implied by CPPI floor mechanism",
x = "Date",
y = "Guarantee Value"
) +
scale_color_viridis_d(option = "cividis") +
theme_minimal(base_size = 13) +
theme(
plot.title = element_text(face = "bold", size = 15, hjust = 0.5),
plot.subtitle = element_text(size = 11, hjust = 0.5, color = "gray40"),
axis.title = element_text(face = "bold"),
panel.grid.minor = element_blank(),
panel.grid.major.x = element_blank()
)
